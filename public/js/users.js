"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[681],{7943:(t,e,r)=>{r.d(e,{Z:()=>f});var a=r(9220),n=["originalData"];function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){if(null==t)return{};var r,a,n=function(t,e){if(null==t)return{};var r,a,n={},s=Object.keys(t);for(a=0;a<s.length;a++)r=s[a],e.indexOf(r)>=0||(n[r]=t[r]);return n}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function u(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isRequesting=!1,this.mapData(e)}var e,r,o;return e=t,r=[{key:"mapData",value:function(t){t.originalData;var e=c(t,n);this.commitedData=i({},e),this.reset()}},{key:"getProtectedKeys",value:function(){return["commitedData","isRequesting"]}},{key:"isKeyProtected",value:function(t){return this.getProtectedKeys().includes(t)}},{key:"commit",value:function(){var e=this;Object.keys(this.commitedData).forEach((function(r){e.isKeyProtected(r)||(e[r]instanceof t?e.commitedData[r]=new t(e[r].getData()):Array.isArray(e[r])||"object"===s(e[r])&&null!==e[r]&&void 0!==e[r]?e.commitedData[r]=JSON.parse(JSON.stringify(e[r])):e.commitedData[r]=e[r])}))}},{key:"reset",value:function(){var e=this;Object.keys(this.commitedData).forEach((function(r){e.isKeyProtected(r)||(e.commitedData[r]instanceof t?e[r]=new t(e.commitedData[r].getData()):Array.isArray(e.commitedData[r])||"object"===s(e.commitedData[r])&&null!==e.commitedData[r]&&void 0!==e.commitedData[r]?e[r]=JSON.parse(JSON.stringify(e.commitedData[r])):e[r]=e.commitedData[r])}))}},{key:"getData",value:function(){var t=this,e={};return Object.keys(this.commitedData).forEach((function(r){return e[r]=t[r]})),e}},{key:"send",value:function(t,e,r){for(var n=this,s=arguments.length,o=new Array(s>3?s-3:0),l=3;l<s;l++)o[l-3]=arguments[l];return r=i({data:this.getData()},r),new Promise((function(s,i){n.isRequesting=!0,a.lW.apply(void 0,[t,e,r].concat(o)).then(s).catch(i).finally((function(){return n.isRequesting=!1}))}))}}],r&&u(e.prototype,r),o&&u(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},3997:(t,e,r)=>{r.r(e),r.d(e,{default:()=>u});var a=r(7757),n=r.n(a),s=r(7367),o=r(7943),i=r(3846);function l(t,e,r,a,n,s,o){try{var i=t[s](o),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(a,n)}const c={name:"ChangePasswordForm",computed:{isCurrentUser:function(){return this.currentUserId==this.form.id}},data:function(){return{showModal:!1,clearModal:!0,form:new o.Z({id:0,current_password:"",password:"",password_confirmation:""})}},methods:{initialize:function(t){this.form.reset(),this.form.id=t,this.$refs.modal.open()},clearErrors:function(){this.$refs.current_password&&this.$refs.current_password.clearError(),this.$refs.password.clearError(),this.$refs.password_confirmation.clearError()},onHide:function(){this.$refs.modal.close(),this.form.reset(),this.clearErrors()},save:function(){var t,e=this;return(t=n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.iG)("Are you sure you want to change this user's password?");case 2:if(t.sent.value){t.next=5;break}return t.abrupt("return");case 5:r=route("api.users.update-password",e.form.id),e.form.send("patch",r).then((function(t){return e.saved(t)})).catch((function(t){return e.saveFailed(t)}));case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,n){var s=t.apply(e,r);function o(t){l(s,a,n,o,i,"next",t)}function i(t){l(s,a,n,o,i,"throw",t)}o(void 0)}))})()},saved:function(t){(0,i.Ug)(t.data.message),this.onHide()},saveFailed:function(t){var e=this.form.id;this.form.reset(),this.form.id=e,(0,i.X7)(this.$refs,t)}},props:{currentUserId:Number},mounted:function(){s.$.$on("users.show-change-password",this.initialize)}};const u=(0,r(1900).Z)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"inline-block"},[r("modal",{ref:"modal",attrs:{title:"Change Password"},on:{hidden:t.onHide},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("form",{staticClass:"row text-left",on:{submit:function(t){t.preventDefault()}}},[r("div",{staticClass:"col-lg-12"},[t.isCurrentUser?r("form-input",{ref:"current_password",attrs:{placeholder:"Current password",label:"Current password",type:"password"},model:{value:t.form.current_password,callback:function(e){t.$set(t.form,"current_password",e)},expression:"form.current_password"}}):t._e()],1),t._v(" "),r("div",{staticClass:"col-lg-12"},[r("form-input",{ref:"password",attrs:{placeholder:"New password",label:"New password",type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),r("div",{staticClass:"col-lg-12"},[r("form-input",{ref:"password_confirmation",attrs:{placeholder:"Confirm password",label:"Confirm password",type:"password"},model:{value:t.form.password_confirmation,callback:function(e){t.$set(t.form,"password_confirmation",e)},expression:"form.password_confirmation"}})],1),t._v(" "),r("div",{staticClass:"col-lg-12"},[t.form.isRequesting?r("button",{staticClass:"disabled btn btn-primary btn-rounded long float-right",attrs:{disabled:""}},[r("i",{staticClass:"fa fa-spinner fa-spin mr-2"}),t._v(" Please wait\n                ")]):r("button",{staticClass:"btn btn-primary btn-rounded long float-right",attrs:{type:"submit"},on:{click:t.save}},[r("i",{staticClass:"fa fa-save mr-1"}),t._v(" Save\n                ")])])])])],1)}),[],!1,null,null,null).exports},8026:(t,e,r)=>{r.r(e),r.d(e,{default:()=>u});var a=r(7757),n=r.n(a),s=r(7367),o=r(7943),i=r(3846);function l(t,e,r,a,n,s,o){try{var i=t[s](o),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(a,n)}const c={name:"CreateUserForm",data:function(){return{modalShown:!1,form:new o.Z({email:"",name:"",password:"",password_confirmation:"",type:""})}},methods:{initialize:function(){this.form.reset(),this.form.type=this.type},close:function(){this.form.reset(),this.$refs.modal.close()},show:function(t){this.initialize(t),this.$refs.modal.open()},save:function(){var t,e=this;return(t=n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return setTimeout((function(){return document.activeElement.blur()}),200),t.next=3,(0,i.iG)("Are you sure you want to save this data?","");case 3:if(t.sent.value){t.next=6;break}return t.abrupt("return");case 6:e.form.send("post",route("api.users.store")).then((function(t){return e.saved(t)})).catch((function(t){return e.failedToSave(t)}));case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,n){var s=t.apply(e,r);function o(t){l(s,a,n,o,i,"next",t)}function i(t){l(s,a,n,o,i,"throw",t)}o(void 0)}))})()},saved:function(t){(0,i.Ug)(t.data.message),this.close(),this.$emit("created")},failedToSave:function(t){(0,i.X7)(this.$refs,t),this.form.password="",this.form.password_confirmation=""}},props:{title:String,type:String},mounted:function(){s.$.$on("users.show-create",this.show)}};const u=(0,r(1900).Z)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{ref:"modal",attrs:{title:t.title,small:!1},on:{hidden:function(e){t.modalShown=!1}},model:{value:t.modalShown,callback:function(e){t.modalShown=e},expression:"modalShown"}},[r("form",{staticClass:"text-left pt-4 pb-4 container",on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12"},[r("form-input",{ref:"email",attrs:{label:"Email",placeholder:"Email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),t._v(" "),r("form-input",{ref:"name",attrs:{label:"Name",placeholder:"Name"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),r("form-input",{ref:"password",attrs:{label:"Password",placeholder:"Password",type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),r("form-input",{ref:"password_confirmation",attrs:{label:"Password Confirmation",placeholder:"Password Confirmation",type:"password"},model:{value:t.form.password_confirmation,callback:function(e){t.$set(t.form,"password_confirmation",e)},expression:"form.password_confirmation"}})],1),t._v(" "),r("div",{staticClass:"col-sm-12"},[t.form.isRequesting?r("button",{staticClass:"disabled btn btn-primary btn-rounded long float-right",attrs:{disabled:""}},[r("i",{staticClass:"fas fa-spin fa-spinner mr-2"}),t._v(" Please wait\n                ")]):r("button",{staticClass:"btn btn-primary btn-rounded long float-right",attrs:{type:"submit"}},[r("i",{staticClass:"fa fa-save mr-1"}),t._v(" Save\n                ")])])])])])}),[],!1,null,null,null).exports},1807:(t,e,r)=>{r.r(e),r.d(e,{default:()=>c});var a=r(7757),n=r.n(a),s=r(7943),o=r(3846);function i(t,e,r,a,n,s,o){try{var i=t[s](o),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(a,n)}const l={name:"UserForm",data:function(){return{editable:!1,form:new s.Z({id:"",email:"",name:""})}},methods:{initialize:function(){this.form.id=this.user.id,this.form.email=this.user.email,this.form.name=this.user.name},toggleEdit:function(){(this.editable=!this.editable)?this.form.commit():this.form.reset()},save:function(){var t,e=this;return(t=n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.iG)("Are you sure you want to edit this data?","");case 2:if(t.sent.value){t.next=5;break}return t.abrupt("return");case 5:e.form.send("put",route("api.users.update",e.form.id)).then((function(t){return e.saved(t)})).catch((function(t){return e.failedToSave(t)}));case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,n){var s=t.apply(e,r);function o(t){i(s,a,n,o,l,"next",t)}function l(t){i(s,a,n,o,l,"throw",t)}o(void 0)}))})()},saved:function(t){(0,o.Ug)(t.data.message),this.editable=!1,this.$emit("updated",this.form)},failedToSave:function(t){(0,o.X7)(this.$refs,t)}},props:{user:Object},mounted:function(){this.initialize()}};const c=(0,r(1900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"mt-1"},[t.editable?t._e():r("div",{staticClass:"btn btn-link btn-sm text-blue float-right",on:{click:t.toggleEdit}},[r("i",{staticClass:"fa fa-edit"}),t._v(" Edit\n        ")]),t._v(" "),t.editable&&!t.form.isRequesting?r("div",{staticClass:"btn btn-link btn-sm text-danger float-right",on:{click:t.toggleEdit}},[r("i",{staticClass:"fa fa-ban"}),t._v(" Cancel\n        ")]):t._e()]),t._v(" "),t.editable?r("form",{staticClass:"text-left pt-4 pb-4 container",on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12"},[r("form-input",{ref:"email",attrs:{label:"Email",placeholder:"Email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),t._v(" "),r("form-input",{ref:"name",attrs:{label:"Name",placeholder:"Name"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("div",{staticClass:"col-sm-12"},[t.form.isRequesting?r("button",{staticClass:"disabled btn btn-primary btn-rounded long float-right",attrs:{disabled:""}},[r("i",{staticClass:"fas fa-spin fa-spinner mr-2"}),t._v(" Please wait\n                ")]):r("button",{staticClass:"btn btn-primary btn-rounded long float-right",attrs:{type:"submit"}},[r("i",{staticClass:"fa fa-save mr-1"}),t._v(" Save\n                ")])])])]):r("div",{staticClass:"text-left pt-4 pb-4"},[r("labeled-data",{attrs:{label:"Email",value:t.form.email}}),t._v(" "),r("labeled-data",{attrs:{label:"Name",value:t.form.name}})],1)])}),[],!1,null,null,null).exports}}]);